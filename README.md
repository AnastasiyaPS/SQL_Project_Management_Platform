# Платформа управления проектами

## Описание проекта
Проект представляет собой учебную SQL-платформу управления проектами и задачами.
Система предназначена для планирования, выполнения и контроля задач,
управления ресурсами, назначением исполнителей и отслеживания статусов и сроков выполнения.

Проект реализован в виде набора SQL-скриптов для СУБД PostgreSQL.

---

## Предметная область
Управление проектами и задачами, включая:
- создание проектов
- назначение пользователей в проекты
- создание задач
- назначение исполнителей
- отслеживание статусов задач
- хранение истории изменений статусов (SCD Type 2)
- классификация задач тегами
- добавление комментариев

---

## Используемая СУБД
PostgreSQL 15

---

## Основные сущности
- **Projects** — проекты с задачами, сроками и описанием
- **Task** — задачи, назначаемые исполнителям и имеющие статус
- **Users** — пользователи системы
- **Status** — справочник статусов задач
- **Tag** — теги для классификации задач
- **Comments** — комментарии к задачам

---

## Связи между сущностями
- Project (1) – (M) Task  
- Users (1) – (M) Task  
- Status (1) – (M) Task  
- Task (M) – (M) Tag  
- Task (1) – (M) Comments  
- Users (1) – (M) Comments  
- Project (M) – (M) Users  

---

## Таблицы связей
- **Task_Tags** — связь задач и тегов (M:M)
- **Project_Users** — участники проектов и их роли

---

## Версионные данные
Для хранения истории изменения статусов задач используется подход **SCD Type 2**.
Каждое изменение статуса задачи приводит к созданию новой записи в таблице
`task_status_history`, при этом предыдущая запись закрывается и помечается как неактуальная.

---

## Ограничения целостности
- обеспечена ссылочная целостность с помощью внешних ключей (FOREIGN KEY)
- контроль корректности дат выполнения задач
- проверка корректности электронной почты пользователей
- гарантируется наличие только одного текущего статуса у каждой задачи

---

## Индексы
В проекте используются индексы для оптимизации:
- выборки задач по проекту
- получения задач пользователя
- фильтрации задач по статусу
- анализа сроков выполнения
- работы с историей статусов

Индексы подобраны на основе предполагаемых сценариев использования и аналитических запросов.

---

## Процедуры
Реализованы хранимые процедуры:
- **change_task_status** — смена статуса задачи с корректным обновлением истории
- **create_task** — создание задачи с автоматическим назначением начального статуса

Процедуры обеспечивают целостность данных и предотвращают рассинхронизацию таблиц.

---

## Представления
- **v_current_task** — текущие задачи с основной информацией
- **v_overdue_tasks** — список просроченных задач
- **v_task_full_history** — полная история статусов задач

Представления упрощают работу с данными и используются для аналитики и отображения информации.

---

## Структура проекта
- `Script_tables.sql` — создание таблиц
- `Script_check.sql` — ограничения и внешние ключи
- `Script_index.sql` — индексы
- `Script_procedure.sql` — процедуры
- `Script_view.sql` — представления
- `Script_insert.sql` — тестовые данные
- `Script_request.sql` — SQL-запросы

---

## CI/CD
Проект содержит pipeline поднимает PostgreSQL и выполняет SQL-скрипты из папки Scripts


